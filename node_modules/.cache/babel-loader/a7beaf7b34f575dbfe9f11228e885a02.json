{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url-search-params.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { logout as _logout } from \"../../api/data.js\";\nexport default {\n  name: \"CommonHeader\",\n  data: function data() {\n    return {\n      user: {}\n    };\n  },\n  methods: {\n    handleMenu: function handleMenu() {\n      this.$store.commit(\"collapseMenu\");\n    },\n    goHome: function goHome() {\n      this.$router.push({\n        name: \"Home\"\n      });\n    },\n    logout: function logout() {\n      var _this = this;\n\n      var param = new URLSearchParams();\n      param.append(\"username\", this.user.username);\n\n      _logout(param).then(function (res) {\n        var ret = res.data[\"ret\"];\n        var msg = res.data[\"msg\"];\n\n        if (ret === 0) {\n          _this.$message.success(msg);\n\n          _this.$store.commit(\"clearToken\");\n\n          _this.$store.commit(\"clearMenu\");\n\n          _this.$store.commit(\"clearUser\");\n\n          _this.$router.push({\n            name: \"Login\"\n          });\n        }\n      });\n    },\n    getTokenUser: function getTokenUser() {\n      this.$store.commit(\"getUser\");\n      this.user = JSON.parse(this.$store.state.user.user);\n    }\n  },\n  created: function created() {\n    this.getTokenUser();\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AAEA;AACAA,sBADA;AAEAC,MAFA,kBAEA;AACA;AACAC;AADA;AAGA,GANA;AAOAC;AACAC,cADA,wBACA;AACA;AACA,KAHA;AAIAC,UAJA,oBAIA;AACA;AAAAL;AAAA;AACA,KANA;AAOAM,UAPA,oBAOA;AAAA;;AACA;AACAC;;AACAD;AACA;AACA;;AACA;AACA;;AACA;;AACA;;AACA;;AACA;AAAAN;AAAA;AACA;AACA,OAVA;AAWA,KArBA;AAsBAQ,gBAtBA,0BAsBA;AACA;AACA;AACA;AAzBA,GAPA;AAkCAC,SAlCA,qBAkCA;AACA;AACA;AApCA","names":["name","data","user","methods","handleMenu","goHome","logout","param","getTokenUser","created"],"sourceRoot":"src/components","sources":["CommonHeader.vue"],"sourcesContent":["<template>\r\n  <header>\r\n    <div class=\"l-content\">\r\n      <el-button\r\n        @click=\"handleMenu\"\r\n        plain\r\n        icon=\"el-icon-menu\"\r\n        size=\"mini\"\r\n      ></el-button>\r\n      <!-- <h3 style=\"color: #fff\">首页</h3> -->\r\n      <!-- <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item\r\n          v-for=\"item in tags\"\r\n          :key=\"item.path\"\r\n          :to=\"{ path: item.path }\"\r\n          >{{ item.label }}</el-breadcrumb-item\r\n        >\r\n      </el-breadcrumb> -->\r\n    </div>\r\n    <div class=\"r-content\">\r\n      <el-dropdown trigger=\"click\" szie=\"mini\">\r\n        <span>\r\n          <img class=\"user\" :src=\"user.webpath\" />\r\n        </span>\r\n        <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item @click.native=\"goHome\">个人中心</el-dropdown-item>\r\n          <el-dropdown-item @click.native=\"logout\">退出</el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </el-dropdown>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script>\r\nimport { logout } from \"../../api/data.js\";\r\n\r\nexport default {\r\n  name: \"CommonHeader\",\r\n  data() {\r\n    return {\r\n      user: {},\r\n    };\r\n  },\r\n  methods: {\r\n    handleMenu() {\r\n      this.$store.commit(\"collapseMenu\");\r\n    },\r\n    goHome() {\r\n      this.$router.push({ name: \"Home\" });\r\n    },\r\n    logout() {\r\n      let param = new URLSearchParams();\r\n      param.append(\"username\", this.user.username);\r\n      logout(param).then((res) => {\r\n        var ret = res.data[\"ret\"];\r\n        var msg = res.data[\"msg\"];\r\n        if (ret === 0) {\r\n          this.$message.success(msg);\r\n          this.$store.commit(\"clearToken\");\r\n          this.$store.commit(\"clearMenu\");\r\n          this.$store.commit(\"clearUser\");\r\n          this.$router.push({ name: \"Login\" });\r\n        }\r\n      });\r\n    },\r\n    getTokenUser() {\r\n      this.$store.commit(\"getUser\");\r\n      this.user = JSON.parse(this.$store.state.user.user);\r\n    },\r\n  },\r\n  created() {\r\n    this.getTokenUser();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\nheader {\r\n  display: flex;\r\n  height: 100%;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.l-content {\r\n  display: flex;\r\n  align-items: center;\r\n  .el-button {\r\n    margin-right: 20px;\r\n  }\r\n}\r\n.r-content {\r\n  .user {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}