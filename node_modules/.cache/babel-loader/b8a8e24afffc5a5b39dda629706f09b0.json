{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url-search-params.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { register as _register } from \"../../api/data.js\";\nexport default {\n  name: \"Register\",\n  data: function data() {\n    return {\n      isShow: false,\n      form: {\n        username: \"\",\n        password: \"\",\n        againPassword: \"\",\n        userType: \"0\",\n        code: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"请输入用户名\",\n          trigger: \"blur\"\n        }, {\n          min: 3,\n          max: 9,\n          message: \"用户名长度在3-9个字符之间\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }, {\n          min: 6,\n          max: 18,\n          message: \"密码长度在6-18个字符之间\",\n          trigger: \"blur\"\n        }],\n        againPassword: [{\n          required: true,\n          message: \"请再次输入密码\",\n          trigger: \"blur\"\n        }, {\n          min: 6,\n          max: 18,\n          message: \"密码长度在6-18个字符之间\",\n          trigger: \"blur\"\n        }],\n        code: [{\n          required: true,\n          message: \"请再次输入邀请码\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    agreeChange: function agreeChange(val) {\n      if (val === \"0\") {\n        this.isShow = false;\n      } else {\n        this.isShow = true;\n      }\n    },\n    isUsername: function isUsername(username) {\n      //判断用户名是否正确格式\n      var reg = /^[a-zA-Z0-9_-]{3,9}$/;\n      return reg.test(username);\n    },\n    isPassword: function isPassword(password) {\n      //判断密码是否是正确格式\n      var reg = /^[\\w]{6,18}$/;\n      return reg.test(password);\n    },\n    register: function register() {\n      var _this = this;\n\n      var username = this.form.username;\n      var password = this.form.password;\n      var againPassword = this.form.againPassword;\n      var userType = this.form.userType;\n      var code = this.form.code;\n\n      if (username !== \"\" && password !== \"\" && againPassword !== \"\") {\n        if (password !== againPassword) {\n          this.$message.error(\"两次密码不相同\");\n        } else if (!this.isUsername(username)) {\n          this.$message.error(\"用户名格式不正确！\");\n        } else if (!this.isPassword(password)) {\n          this.$message.error(\"密码格式不正确！\");\n        } else {\n          var param = new URLSearchParams();\n          param.append(\"username\", username);\n          param.append(\"password\", password);\n          param.append(\"userType\", userType);\n          param.append(\"code\", code);\n\n          _register(param).then(function (res) {\n            var ret = res.data[\"ret\"];\n            var msg = res.data[\"msg\"];\n\n            if (ret === 0) {\n              _this.$message.success(msg);\n\n              _this.$router.push({\n                name: \"Login\"\n              });\n            } else {\n              _this.$message.error(msg);\n            }\n          });\n        }\n      } else {\n        this.$message.error(\"用户名或密码为空\");\n      }\n    },\n    pre: function pre() {\n      this.$router.push({\n        name: \"Login\"\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AAEA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,mBADA;AAEAC;AACAC,oBADA;AAEAC,oBAFA;AAGAC,yBAHA;AAIAC,qBAJA;AAKAC;AALA,OAFA;AASAC;AACAL,mBACA;AACAM,wBADA;AAEAC,2BAFA;AAGAC;AAHA,SADA,EAMA;AACAC,gBADA;AAEAC,gBAFA;AAGAH,mCAHA;AAIAC;AAJA,SANA,CADA;AAcAP,mBACA;AACAK,wBADA;AAEAC,0BAFA;AAGAC;AAHA,SADA,EAMA;AACAC,gBADA;AAEAC,iBAFA;AAGAH,mCAHA;AAIAC;AAJA,SANA,CAdA;AA2BAN,wBACA;AACAI,wBADA;AAEAC,4BAFA;AAGAC;AAHA,SADA,EAMA;AACAC,gBADA;AAEAC,iBAFA;AAGAH,mCAHA;AAIAC;AAJA,SANA,CA3BA;AAwCAJ,eACA;AACAE,wBADA;AAEAC,6BAFA;AAGAC;AAHA,SADA;AAxCA;AATA;AA0DA,GA7DA;AA8DAG;AACAC,eADA,uBACAC,GADA,EACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAPA;AAQAC,cARA,sBAQAd,QARA,EAQA;AACA;AACA;AACA;AACA,KAZA;AAaAe,cAbA,sBAaAd,QAbA,EAaA;AACA;AACA;AACA;AACA,KAjBA;AAkBAe,YAlBA,sBAkBA;AAAA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACAC;AACAA;AACAA;AACAA;;AACAD;AACA;AACA;;AACA;AACA;;AACA;AAAApB;AAAA;AACA,aAHA,MAGA;AACA;AACA;AACA,WATA;AAUA;AACA,OAxBA,MAwBA;AACA;AACA;AACA,KAnDA;AAoDAsB,OApDA,iBAoDA;AACA;AAAAtB;AAAA;AACA;AAtDA;AA9DA","names":["name","data","isShow","form","username","password","againPassword","userType","code","rules","required","message","trigger","min","max","methods","agreeChange","val","isUsername","isPassword","register","param","pre"],"sourceRoot":"views/register","sources":["index.vue"],"sourcesContent":["<template>\r\n  <el-form\r\n    :model=\"form\"\r\n    status-icon\r\n    :rules=\"rules\"\r\n    ref=\"form\"\r\n    label-width=\"100px\"\r\n    class=\"login-container\"\r\n  >\r\n    <h3 class=\"login-title\">用户注册</h3>\r\n    <el-form-item\r\n      label=\"用户名\"\r\n      label-width=\"80px\"\r\n      prop=\"username\"\r\n      class=\"username\"\r\n    >\r\n      <el-input\r\n        type=\"input\"\r\n        v-model=\"form.username\"\r\n        autocomplete=\"off\"\r\n        placeholder=\"请输入用户名\"\r\n      ></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"密码\" label-width=\"80px\" prop=\"password\">\r\n      <el-input\r\n        type=\"password\"\r\n        v-model=\"form.password\"\r\n        autocomplete=\"off\"\r\n        placeholder=\"请输入密码\"\r\n      ></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"确认密码\" label-width=\"80px\" prop=\"password\">\r\n      <el-input\r\n        type=\"password\"\r\n        v-model=\"form.againPassword\"\r\n        autocomplete=\"off\"\r\n        placeholder=\"请再次输入密码\"\r\n      ></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"用户类型\">\r\n      <el-radio-group v-model=\"form.userType\" @change=\"agreeChange\">\r\n        <el-radio label=\"0\" name=\"userType\">普通用户</el-radio>\r\n        <el-radio label=\"1\" name=\"userType\">管理员</el-radio>\r\n      </el-radio-group>\r\n    </el-form-item>\r\n    <el-form-item\r\n      label=\"邀请码\"\r\n      label-width=\"80px\"\r\n      class=\"username\"\r\n      v-if=\"isShow\"\r\n      prop=\"code\"\r\n    >\r\n      <el-input\r\n        type=\"input\"\r\n        v-model=\"form.code\"\r\n        autocomplete=\"off\"\r\n        placeholder=\"请输入邀请码\"\r\n      ></el-input>\r\n    </el-form-item>\r\n    <el-form-item class=\"register-submit\">\r\n      <el-button type=\"primary\" @click=\"register\">注册</el-button\r\n      ><el-button type=\"primary\" @click=\"pre\" class=\"register-submit\"\r\n        >返回</el-button\r\n      >\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport { register } from \"../../api/data.js\";\r\n\r\nexport default {\r\n  name: \"Register\",\r\n  data() {\r\n    return {\r\n      isShow: false,\r\n      form: {\r\n        username: \"\",\r\n        password: \"\",\r\n        againPassword: \"\",\r\n        userType: \"0\",\r\n        code: \"\",\r\n      },\r\n      rules: {\r\n        username: [\r\n          {\r\n            required: true,\r\n            message: \"请输入用户名\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            min: 3,\r\n            max: 9,\r\n            message: \"用户名长度在3-9个字符之间\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: \"请输入密码\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            min: 6,\r\n            max: 18,\r\n            message: \"密码长度在6-18个字符之间\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        againPassword: [\r\n          {\r\n            required: true,\r\n            message: \"请再次输入密码\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            min: 6,\r\n            max: 18,\r\n            message: \"密码长度在6-18个字符之间\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        code: [\r\n          {\r\n            required: true,\r\n            message: \"请再次输入邀请码\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    agreeChange(val) {\r\n      if (val === \"0\") {\r\n        this.isShow = false;\r\n      } else {\r\n        this.isShow = true;\r\n      }\r\n    },\r\n    isUsername(username) {\r\n      //判断用户名是否正确格式\r\n      var reg = /^[a-zA-Z0-9_-]{3,9}$/;\r\n      return reg.test(username);\r\n    },\r\n    isPassword(password) {\r\n      //判断密码是否是正确格式\r\n      var reg = /^[\\w]{6,18}$/;\r\n      return reg.test(password);\r\n    },\r\n    register() {\r\n      var username = this.form.username;\r\n      var password = this.form.password;\r\n      var againPassword = this.form.againPassword;\r\n      var userType = this.form.userType;\r\n      var code = this.form.code;\r\n      if (username !== \"\" && password !== \"\" && againPassword !== \"\") {\r\n        if (password !== againPassword) {\r\n          this.$message.error(\"两次密码不相同\");\r\n        } else if (!this.isUsername(username)) {\r\n          this.$message.error(\"用户名格式不正确！\");\r\n        } else if (!this.isPassword(password)) {\r\n          this.$message.error(\"密码格式不正确！\");\r\n        } else {\r\n          let param = new URLSearchParams();\r\n          param.append(\"username\", username);\r\n          param.append(\"password\", password);\r\n          param.append(\"userType\", userType);\r\n          param.append(\"code\", code);\r\n          register(param).then((res) => {\r\n            var ret = res.data[\"ret\"];\r\n            var msg = res.data[\"msg\"];\r\n            if (ret === 0) {\r\n              this.$message.success(msg);\r\n              this.$router.push({ name: \"Login\" });\r\n            } else {\r\n              this.$message.error(msg);\r\n            }\r\n          });\r\n        }\r\n      } else {\r\n        this.$message.error(\"用户名或密码为空\");\r\n      }\r\n    },\r\n    pre() {\r\n      this.$router.push({ name: \"Login\" });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.login-container {\r\n  border-radius: 15px;\r\n  background-clip: padding-box;\r\n  margin: 180px auto;\r\n  width: 350px;\r\n  padding: 35px 35px 15px 35px;\r\n  background-color: #fff;\r\n  border: 1px solid #eaeaea;\r\n  box-shadow: 0 0 25px #cac6c6;\r\n}\r\n\r\n.login-title {\r\n  margin: 0px auto 40px auto;\r\n  text-align: center;\r\n  color: #505458;\r\n}\r\n\r\n.login-submit {\r\n  margin: 10px 10px 0px auto;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}