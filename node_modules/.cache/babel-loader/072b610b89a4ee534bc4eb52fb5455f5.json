{"ast":null,"code":"import \"D:\\\\scmb\\\\scmb_front\\\\node_modules\\\\core-js\\\\modules\\\\es.array.iterator.js\";\nimport \"D:\\\\scmb\\\\scmb_front\\\\node_modules\\\\core-js\\\\modules\\\\es.promise.js\";\nimport \"D:\\\\scmb\\\\scmb_front\\\\node_modules\\\\core-js\\\\modules\\\\es.object.assign.js\";\nimport \"D:\\\\scmb\\\\scmb_front\\\\node_modules\\\\core-js\\\\modules\\\\es.promise.finally.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport Vue from 'vue';\nimport { Button, Radio, Container, Main, Header, Aside, Menu, Submenu, MenuItem, MenuItemGroup, Dropdown, DropdownMenu, DropdownItem, Row, Col, Card, Table, TableColumn, Form, FormItem, Input, Select, Option, Switch, DatePicker, Dialog, Pagination, Upload, Tag, Message, RadioGroup, MessageBox } from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport App from './App.vue';\nimport router from '../router';\nimport store from '../store';\nimport axios from 'axios'; // import '../api/mock.js'\n///import VueAxios from 'vue-axios'\n\nVue.config.productionTip = false;\nVue.use(Button);\nVue.use(Radio);\nVue.use(Container);\nVue.use(Main);\nVue.use(Header);\nVue.use(Aside);\nVue.use(Menu);\nVue.use(Submenu);\nVue.use(MenuItem);\nVue.use(MenuItemGroup);\nVue.use(Dropdown);\nVue.use(DropdownMenu);\nVue.use(DropdownItem);\nVue.use(Row);\nVue.use(Col);\nVue.use(Card);\nVue.use(Table);\nVue.use(TableColumn);\nVue.use(Form);\nVue.use(FormItem);\nVue.use(Input);\nVue.use(Select);\nVue.use(Option);\nVue.use(Switch);\nVue.use(DatePicker);\nVue.use(Dialog);\nVue.use(Pagination);\nVue.use(Upload);\nVue.use(Tag);\nVue.use(Radio);\nVue.use(RadioGroup); //Vue.use(MessageBox);\n//Vue.use(VueAxios,axios);\n\nVue.prototype.$http = axios;\nVue.prototype.$confirm = MessageBox.confirm;\nVue.prototype.$message = Message;\nimport { logout } from \"../api/data.js\";\nrouter.beforeEach(function (to, from, next) {\n  store.commit('getToken');\n  store.commit('getUser');\n  store.commit('getUsername');\n  var token = store.state.user.token;\n  var username = store.state.user.username;\n\n  if (!token && to.name !== 'Login' && to.name !== 'Register') {\n    console.log(username);\n\n    if (username !== undefined) {\n      var param = new URLSearchParams();\n      param.append(\"username\", username);\n      logout(param).then(function (res) {\n        var ret = res.data[\"ret\"];\n        var msg = res.data[\"msg\"];\n\n        if (ret === 0) {\n          store.commit(\"clearToken\");\n          store.commit(\"clearMenu\");\n          store.commit(\"clearUser\");\n        }\n      });\n    }\n\n    next({\n      name: 'Login'\n    });\n    Message.error(\"权限过期，请登录账号\");\n  } else if (token && to.name === 'Login') {\n    next({\n      name: 'Home'\n    });\n  } else {\n    next();\n  }\n});\nnew Vue({\n  store: store,\n  router: router,\n  render: function render(h) {\n    return h(App);\n  },\n  created: function created() {\n    store.commit('addMenu', router);\n    setInterval(function () {\n      location.reload(false);\n    }, 60000 * 2); //每隔120秒检测一下，权限是否过期\n  }\n}).$mount('#app');","map":{"version":3,"sources":["D:/scmb/scmb_front/src/main.js"],"names":["Vue","Button","Radio","Container","Main","Header","Aside","Menu","Submenu","MenuItem","MenuItemGroup","Dropdown","DropdownMenu","DropdownItem","Row","Col","Card","Table","TableColumn","Form","FormItem","Input","Select","Option","Switch","DatePicker","Dialog","Pagination","Upload","Tag","Message","RadioGroup","MessageBox","App","router","store","axios","config","productionTip","use","prototype","$http","$confirm","confirm","$message","logout","beforeEach","to","from","next","commit","token","state","user","username","name","console","log","undefined","param","URLSearchParams","append","then","res","ret","data","msg","error","render","h","created","setInterval","location","reload","$mount"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport { Button, Radio, Container, Main, Header, Aside, Menu, Submenu, MenuItem, MenuItemGroup, Dropdown, DropdownMenu, DropdownItem, Row, Col, Card, Table, TableColumn, Form, FormItem, Input, Select, Option, Switch, DatePicker, Dialog, Pagination, Upload, Tag, Message, RadioGroup, MessageBox } from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport App from './App.vue';\n\nimport router from '../router';\nimport store from '../store'\nimport axios from 'axios'\n// import '../api/mock.js'\n///import VueAxios from 'vue-axios'\n\n\n\nVue.config.productionTip = false\n\nVue.use(Button);\nVue.use(Radio);\nVue.use(Container);\nVue.use(Main);\nVue.use(Header);\nVue.use(Aside);\nVue.use(Menu);\nVue.use(Submenu);\nVue.use(MenuItem);\nVue.use(MenuItemGroup);\nVue.use(Dropdown);\nVue.use(DropdownMenu);\nVue.use(DropdownItem);\nVue.use(Row);\nVue.use(Col);\nVue.use(Card);\nVue.use(Table);\nVue.use(TableColumn);\nVue.use(Form);\nVue.use(FormItem);\nVue.use(Input);\nVue.use(Select);\nVue.use(Option);\nVue.use(Switch);\nVue.use(DatePicker);\nVue.use(Dialog);\nVue.use(Pagination);\nVue.use(Upload)\nVue.use(Tag);\nVue.use(Radio);\nVue.use(RadioGroup)\n//Vue.use(MessageBox);\n//Vue.use(VueAxios,axios);\nVue.prototype.$http = axios\nVue.prototype.$confirm = MessageBox.confirm\nVue.prototype.$message = Message\nimport { logout } from \"../api/data.js\";\n\nrouter.beforeEach((to, from, next) => {\n  store.commit('getToken')\n  store.commit('getUser')\n  store.commit('getUsername')\n  const token = store.state.user.token\n  const username = store.state.user.username\n  if (!token && to.name !== 'Login' && to.name !== 'Register') {\n    console.log(username)\n    if (username !== undefined) {\n      let param = new URLSearchParams();\n      param.append(\"username\", username);\n      logout(param).then((res) => {\n        var ret = res.data[\"ret\"];\n        var msg = res.data[\"msg\"];\n        if (ret === 0) {\n          store.commit(\"clearToken\");\n          store.commit(\"clearMenu\");\n          store.commit(\"clearUser\");\n        }\n      });\n    }\n    next({ name: 'Login' })\n    Message.error(\"权限过期，请登录账号\");\n  } else if (token && to.name === 'Login') {\n    next({ name: 'Home' })\n  } else {\n    next()\n  }\n})\nnew Vue({\n  store,\n  router,\n  render: h => h(App),\n  created() {\n    store.commit('addMenu', router)\n    setInterval(() => {\n      location.reload(false)\n    }, 60000 * 2); //每隔120秒检测一下，权限是否过期\n  }\n}).$mount('#app')\n"]},"metadata":{},"sourceType":"module"}